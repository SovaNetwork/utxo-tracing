# =============================================================================
# SOVA UTXO INDEXER ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update the values for your setup
#
# Choose ONE of the following configurations:
# 1. LOCAL BITCOIN NODE
# 2. EXTERNAL BITCOIN RPC API

# =============================================================================
# OPTION 1: LOCAL BITCOIN NODE CONFIGURATION
# =============================================================================
# Use with: docker-compose --profile local-bitcoin up

# Bitcoin Network Configuration
BITCOIN_NETWORK=regtest
BITCOIN_RPC_USER=user
BITCOIN_RPC_PASSWORD=password
BITCOIN_CONNECTION_TYPE=bitcoincore
BITCOIN_CONFIRMATION_THRESHOLD=6
BITCOIN_REVERT_THRESHOLD=18
BITCOIN_RPC_MAX_RETRIES=3

# Note: BITCOIN_RPC_URL is not needed for local bitcoin - it will use the local node

# =============================================================================
# OPTION 2: EXTERNAL BITCOIN RPC API CONFIGURATION
# =============================================================================
# Use with: docker-compose --profile external-bitcoin up
# Uncomment and configure the following for an external RPC API:

# # Bitcoin Network Configuration (external)
# BITCOIN_NETWORK=mainnet
# BITCOIN_RPC_URL=https://your.external.service/bitcoin-mainnet
# BITCOIN_RPC_USER=your_rpc_username
# BITCOIN_RPC_PASSWORD=your_rpc_password
# BITCOIN_CONNECTION_TYPE=external
# BITCOIN_CONFIRMATION_THRESHOLD=6
# BITCOIN_REVERT_THRESHOLD=18
# BITCOIN_RPC_MAX_RETRIES=3

# =============================================================================
# INDEXER CONFIGURATION (Required for both options)
# =============================================================================

# Starting block height for indexing (0 = from genesis)
INDEXER_START_BLOCK=0

# Polling rate in milliseconds
INDEXER_POLLING_RATE=2000

# Maximum blocks to process per batch
INDEXER_MAX_BLOCKS=200

# Shared API key for indexer authentication
INDEXER_SHARED_API_KEY=indexer_api_key_here

# =============================================================================
# ENCLAVE CONFIGURATION (Required for both options)
# =============================================================================

# BIP32 seed for key derivation (generate a secure random seed)
ENCLAVE_BIP32_SEED=999102030405060708090a0b0c0d0e0f

# API key for enclave authentication
ENCLAVE_API_KEY=api_key_here

# =============================================================================
# UTXO STORAGE CONFIGURATION (Required for both options)
# =============================================================================

# UTXO service host and port
UTXO_HOST=0.0.0.0
UTXO_PORT=5557

# Data source type (sqlite, csv)
UTXO_DATASOURCE=sqlite

# =============================================================================
# LOGGING CONFIGURATION (Required for both options)
# =============================================================================

# Log level for indexer and storage services
LOG_LEVEL=info

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. Generate secure random values for:
#    - ENCLAVE_BIP32_SEED (64 hex characters)
#    - ENCLAVE_API_KEY (32+ character random string)
#    - INDEXER_SHARED_API_KEY (32+ character random string)
#
# 2. When using an external API:
#    - Use strong RPC passwords or API keys
#    - Follow the provider's authentication best practices
#    - Restrict network access to necessary services only
#
# 3. Never commit the actual .env file to version control
#    - Add .env to your .gitignore file
#    - Only commit this .env.example file